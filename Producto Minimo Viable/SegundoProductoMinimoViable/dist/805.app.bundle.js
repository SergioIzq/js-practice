"use strict";(self.webpackChunkproyectomvp=self.webpackChunkproyectomvp||[]).push([[805,699],{683:(e,t,s)=>{s.d(t,{Z:()=>a});const a=class{async fetchFile(e){let t=await fetch(e);return await t.text()}}},805:(e,t,s)=>{s.r(t),s.d(t,{Task:()=>n});var a=s(683),o=s(699);class n extends a.Z{#e=null;constructor(){super(),this.#e=new o.User}async render(e){return await this.fetchFile(`components/task/${e}.html`)}createHandler(e){document.querySelector("form.new.task").addEventListener("submit",(async t=>{t.preventDefault();const s=String(t.target.elements[0].value),a=Number(document.querySelector('form.new.task input[name="completed"]:checked').value);let o=await this.#t(s,a);return"id"in o?(e.load("home"),!0):(alert(o.message),!1)})),document.querySelector("form.new.task button.cancel").addEventListener("click",(async t=>{e.load("home")}))}async getAll(e){let t=await fetch(`https://dummyjson.com/todos/user/${e}?limit=10`,{method:"GET",headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`,"Content-Type":"application/json"}});return await t.json()}async completed(e,t){let s=await fetch(`https://dummyjson.com/todos/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({completed:t})});return await s.json()}async delete(e){let t=await fetch(`https://dummyjson.com/todos/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`,"Content-Type":"application/json"}});return await t.json()}async#t(e,t){this.#s(e,t);let s=await fetch("https://dummyjson.com/todos/add",{method:"POST",headers:{Authorization:`Bearer ${sessionStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({todo:e,completed:t,userId:this.#e.id})});return await s.json()}#s(e,t){if(!e instanceof String)throw new Error("Task title only allow text with chars and numbers");if(!t instanceof Boolean)throw new Error("Task completed only allow boolean values")}}},699:(e,t,s)=>{s.r(t),s.d(t,{User:()=>o});var a=s(683);class o extends a.Z{#a=null;#o=null;#n=null;#r=null;constructor(){super();let e=this.#i();this.#a=e.username,this.#o=e.firstName,this.#n=e.lastName,this.#r=e.id}get name(){return`${this.#o} ${this.#n}`}get id(){return this.#r}get username(){return this.#a}#i(){let e=sessionStorage.getItem("token");try{return JSON.parse(atob(e.split(".")[1]))}catch(e){console.error("JWT desconocido")}}}}}]);